<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>ğŸ­ãŠã‚„ã¤ãŠã¿ãã˜ï¼‹ãƒ‡ã‚³ï¼ˆå®Œå…¨ç‰ˆï¼‰</title>
<meta name="description" content="ãŠã‚„ã¤å ã„ï¼‹ãƒ‡ã‚³æ©Ÿèƒ½ã€‚1æ—¥1å›ç„¡æ–™ã€‚">
<style>
  :root{
    --main:#ff5fa2;
    --bg:#fff5f9;
  }
  *{box-sizing:border-box}
  body{margin:0;font-family:sans-serif;background:var(--bg);color:#333;}
  .wrap{max-width:720px;margin:0 auto;padding:16px;}
  .card{background:#fff;border-radius:18px;padding:16px;box-shadow:0 4px 18px rgba(0,0,0,.1);}
  h1{margin:0 0 10px;font-size:24px;text-align:center;}
  input,select,button{width:100%;padding:12px;margin:8px 0;border-radius:12px;border:1px solid #ddd;}
  button{background:var(--main);color:#fff;border:none;font-size:16px;cursor:pointer;}
  #count{font-size:18px;text-align:center;margin:8px 0;color:#ff2e8a;}
  #ad{margin:12px 0;padding:12px;border:1px dashed #aaa;text-align:center;color:#666;}
  .tools{display:flex;gap:8px;flex-wrap:wrap;justify-content:center;margin-top:12px;}
  .tools button{width:auto;padding:10px 14px;}
  canvas{width:100%;max-width:420px;border:1px solid #ddd;border-radius:12px;display:block;margin:12px auto;}
  .stampGrid{display:flex;flex-wrap:wrap;gap:6px;justify-content:center;max-height:220px;overflow:auto;}
  .stampBtn{padding:8px 10px;border-radius:10px;border:1px solid #ddd;background:#fff;cursor:pointer;font-size:18px;}
  .hidden{display:none;}
  .row{display:flex;gap:8px;flex-wrap:wrap;}
  .row > *{flex:1 1 150px;}
  .share{display:flex;gap:8px;justify-content:center;flex-wrap:wrap;margin-top:10px;}
  .share button{width:auto;}
  .mini{font-size:12px;color:#666;margin-top:-6px;margin-bottom:8px;}
  @media (max-width:480px){
    h1{font-size:20px;}
    .row{flex-direction:column;}
  }
</style>
</head>
<body>

<div class="wrap">
  <div class="card" id="main">
    <h1>ğŸ­ãŠã‚„ã¤ãŠã¿ãã˜ğŸ¬ï¼ˆå®Œå…¨ç‰ˆï¼‰</h1>

    <input id="nickname" placeholder="ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ ">
    <input type="date" id="birthday">
    <select id="gender">
      <option value="">æ€§åˆ¥ï¼ˆä»»æ„ï¼‰</option>
      <option value="ç”·æ€§">ç”·æ€§</option>
      <option value="å¥³æ€§">å¥³æ€§</option>
      <option value="ãã®ä»–">ãã®ä»–</option>
    </select>

    <div class="row">
      <input type="file" id="bgUpload" accept="image/*">
      <button id="bgClear">èƒŒæ™¯ãƒªã‚»ãƒƒãƒˆ</button>
    </div>

    <button id="startBtn">å ã†</button>
    <div id="count"></div>

    <div id="ad">
      åºƒå‘Šæ ï¼ˆã“ã“ã«AdSenseã‚³ãƒ¼ãƒ‰ã‚’è²¼ã£ã¦ãã ã•ã„ï¼‰
    </div>

    <div class="share">
      <button onclick="copyURL()">å…±æœ‰URLã‚’ã‚³ãƒ”ãƒ¼</button>
      <button onclick="openSNS('twitter')">Twitter</button>
      <button onclick="openSNS('line')">LINE</button>
    </div>
  </div>
</div>

<script>
/* ==========================
   ãƒ‡ãƒ¼ã‚¿ï¼ˆ100å€‹ãšã¤ï¼‰
========================== */
const snacks = ["ãƒãƒƒã‚­ãƒ¼","æ¥µç´°ãƒãƒƒã‚­ãƒ¼","ã„ã¡ã”ãƒãƒƒã‚­ãƒ¼","ã‚¢ãƒ¼ãƒ¢ãƒ³ãƒ‰ãƒãƒƒã‚­ãƒ¼","ãƒ—ãƒªãƒƒãƒ„","ã‚µãƒ©ãƒ€ãƒ—ãƒªãƒƒãƒ„","ãƒˆãƒãƒˆãƒ—ãƒªãƒƒãƒ„",
"ã‚­ãƒƒãƒˆã‚«ãƒƒãƒˆ","ã‚ªãƒˆãƒŠã®ç”˜ã•ã‚­ãƒƒãƒˆã‚«ãƒƒãƒˆ","æŠ¹èŒ¶ã‚­ãƒƒãƒˆã‚«ãƒƒãƒˆ","ãƒ–ãƒ©ãƒƒã‚¯ã‚µãƒ³ãƒ€ãƒ¼","ç™½ã„ãƒ–ãƒ©ãƒƒã‚¯ã‚µãƒ³ãƒ€ãƒ¼","ãƒ–ãƒ©ãƒƒã‚¯ã‚µãƒ³ãƒ€ãƒ¼ãƒŸãƒ‹",
"ãƒãƒ­ãƒ«ãƒãƒ§ã‚³","ããªã“ã‚‚ã¡ãƒãƒ­ãƒ«","ãƒŸãƒ«ã‚¯ãƒãƒ­ãƒ«","ã„ã¡ã”ãƒãƒ­ãƒ«","ã˜ã‚ƒãŒã‚Šã“ã‚µãƒ©ãƒ€","ã˜ã‚ƒãŒã‚Šã“ãƒãƒ¼ã‚º","ã˜ã‚ƒãŒã‚Šã“æ˜å¤ªå­",
"ãƒãƒ†ãƒˆãƒãƒƒãƒ—ã‚¹ã†ã™ã—ãŠ","ãƒãƒ†ãƒˆãƒãƒƒãƒ—ã‚¹ã‚³ãƒ³ã‚½ãƒ¡","ãƒãƒ†ãƒˆãƒãƒƒãƒ—ã‚¹ã®ã‚Šå¡©","å …ã‚ã’ãƒãƒ†ãƒˆ","ãƒ”ã‚¶ãƒãƒ†ãƒˆ","ã‚«ãƒ©ãƒ ãƒ¼ãƒãƒ§","ã™ã£ã±ãƒ ãƒ¼ãƒãƒ§",
"ã‹ã£ã±ãˆã³ã›ã‚“","ã‚µãƒƒãƒãƒ­ãƒãƒ†ãƒˆ","ãŠã£ã¨ã£ã¨","ãã®ã“ã®å±±","ãŸã‘ã®ã“ã®é‡Œ","ã‚¢ãƒãƒ­","ã‚³ã‚¢ãƒ©ã®ãƒãƒ¼ãƒ","ãƒã‚¤ãƒãƒ¥ã‚¦",
"ãƒã‚¤ãƒãƒ¥ã‚¦ã‚°ãƒ¬ãƒ¼ãƒ—","ãƒã‚¤ãƒãƒ¥ã‚¦ã‚½ãƒ¼ãƒ€","ã‚¬ãƒ«ãƒœ","ã‚«ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¢ãƒ ","ãƒãƒ§ã‚³ãƒ‘ã‚¤","ã‚¨ãƒªãƒ¼ã‚¼","ã‚¢ãƒ«ãƒ•ã‚©ãƒ¼ãƒˆ","ãƒ«ãƒãƒ³ãƒ‰",
"ãƒ“ã‚¹ã‚³","ãƒ ãƒ¼ãƒ³ãƒ©ã‚¤ãƒˆ","æºæ°ãƒ‘ã‚¤","ã†ã¾ã„æ£’ã‚³ãƒ¼ãƒ³ãƒã‚¿ãƒ¼ã‚¸ãƒ¥","ã†ã¾ã„æ£’ãƒãƒ¼ã‚º","ã†ã¾ã„æ£’ã‚ã‚“ãŸã„","ãƒ™ãƒ“ãƒ¼ã‚¹ã‚¿ãƒ¼",
"ã‚­ãƒ£ãƒ©ãƒ¡ãƒ«ã‚³ãƒ¼ãƒ³","ãƒŸãƒ«ã‚­ãƒ¼","ãƒ©ãƒ ãƒ","æœæ±ã‚°ãƒŸ","ãƒ”ãƒ¥ãƒ¬ã‚°ãƒŸ","å¿è€…ã‚ã—","ã“ã‚“ã«ã‚ƒãã‚¼ãƒªãƒ¼","ãƒ¨ãƒ¼ã‚°ãƒ¬ãƒƒãƒˆ","ãƒã‚¤ãƒ¬ãƒ¢ãƒ³",
"æ¿ãƒãƒ§ã‚³","æ˜æ²»ãƒŸãƒ«ã‚¯ãƒãƒ§ã‚³","ãƒ€ãƒ¼ã‚¹","LOOKãƒãƒ§ã‚³","ãƒˆãƒƒãƒ","ã‚¯ãƒ©ãƒ³ã‚­ãƒ¼","ãƒãƒ§ã‚³ãƒœãƒ¼ãƒ«ãƒ”ãƒ¼ãƒŠãƒƒãƒ„","é›ªã®å®¿",
"ã°ã‹ã†ã‘","æ­Œèˆä¼æš","æŸ¿ã®ç¨®","ãŸã¹ã£å­ã©ã†ã¶ã¤","ãƒãƒ¼ãƒ–ãƒ«ãƒãƒ§ã‚³","ãƒ‘ã‚¤ã®å®Ÿ","ãƒ›ãƒ¼ãƒ ãƒ‘ã‚¤","ã‚«ãƒ—ãƒªã‚³","ãƒ•ãƒ«ãƒ¼ãƒ„ã‚¼ãƒªãƒ¼",
"ã©ã‚‰ç„¼ã","ãƒŸãƒ‹ãŸã„ç„¼ã","ã‚³ãƒ³ãƒ“ãƒ‹ãƒ—ãƒªãƒ³","ã‚·ãƒ¥ãƒ¼ã‚¯ãƒªãƒ¼ãƒ ","ã‚¨ã‚¯ãƒ¬ã‚¢","ãƒ­ãƒ¼ãƒ«ã‚±ãƒ¼ã‚­","å¤§ç¦","ã¿ãŸã‚‰ã—å›£å­","ãƒ¡ãƒ­ãƒ³ãƒ‘ãƒ³",
"ã‚¯ãƒªãƒ¼ãƒ ãƒ‘ãƒ³","ãƒãƒ§ã‚³ã‚¹ãƒŠãƒƒã‚¯ãƒ‘ãƒ³","ãƒãƒƒãƒ—ã‚³ãƒ¼ãƒ³","ã‚°ãƒ©ãƒãƒ¼ãƒ©ãƒãƒ¼","ãƒŠãƒƒãƒ„ãƒŸãƒƒã‚¯ã‚¹","ãƒ“ã‚¿ãƒ¼ãƒãƒ§ã‚³","ãƒ›ãƒ¯ã‚¤ãƒˆãƒãƒ§ã‚³","ãƒãƒŠãƒŠãƒãƒƒãƒ—ã‚¹",
"ãŠã«ãã‚Šã›ã‚“ã¹ã„"];

const drinks = ["ã‚³ã‚«ãƒ»ã‚³ãƒ¼ãƒ©","ã‚³ãƒ¼ãƒ©ã‚¼ãƒ­","ãƒ•ã‚¡ãƒ³ã‚¿ã‚ªãƒ¬ãƒ³ã‚¸","ãƒ•ã‚¡ãƒ³ã‚¿ã‚°ãƒ¬ãƒ¼ãƒ—","ã‚«ãƒ«ãƒ”ã‚¹","ã‚«ãƒ«ãƒ”ã‚¹ã‚½ãƒ¼ãƒ€","ä¸‰ãƒ„çŸ¢ã‚µã‚¤ãƒ€ãƒ¼",
"ãƒ¡ãƒ­ãƒ³ã‚½ãƒ¼ãƒ€","ã‚¸ãƒ³ã‚¸ãƒ£ãƒ¼ã‚¨ãƒ¼ãƒ«","åˆå¾Œã®ç´…èŒ¶ã‚¹ãƒˆãƒ¬ãƒ¼ãƒˆ","åˆå¾Œã®ç´…èŒ¶ãƒŸãƒ«ã‚¯","åˆå¾Œã®ç´…èŒ¶ãƒ¬ãƒ¢ãƒ³","ãƒªãƒ—ãƒˆãƒ³ãƒŸãƒ«ã‚¯ãƒ†ã‚£ãƒ¼",
"æŠ¹èŒ¶ãƒ©ãƒ†","ã‚«ãƒ•ã‚§ã‚ªãƒ¬","ãƒœã‚¹ã‚«ãƒ•ã‚§ã‚ªãƒ¬","ç¼¶ã‚³ãƒ¼ãƒ’ãƒ¼å¾®ç³–","ãƒ–ãƒ©ãƒƒã‚¯ã‚³ãƒ¼ãƒ’ãƒ¼","ãƒã‚«ãƒªã‚¹ã‚¨ãƒƒãƒˆ","ã‚¢ã‚¯ã‚¨ãƒªã‚¢ã‚¹",
"ã„ã‚ã¯ã™","å¤©ç„¶æ°´","ç‚­é…¸æ°´","ã‚ªãƒ¬ãƒ³ã‚¸ã‚¸ãƒ¥ãƒ¼ã‚¹","ã‚¢ãƒƒãƒ—ãƒ«ã‚¸ãƒ¥ãƒ¼ã‚¹","ã‚°ãƒ¬ãƒ¼ãƒ—ã‚¸ãƒ¥ãƒ¼ã‚¹","é‡èœã‚¸ãƒ¥ãƒ¼ã‚¹","ãƒˆãƒãƒˆã‚¸ãƒ¥ãƒ¼ã‚¹",
"ã‚¦ãƒ¼ãƒ­ãƒ³èŒ¶","ç·‘èŒ¶","éº¦èŒ¶","ã‚¸ãƒ£ã‚¹ãƒŸãƒ³èŒ¶","ã»ã†ã˜èŒ¶","ç„ç±³èŒ¶","ã‚³ã‚³ã‚¢","ã‚¢ã‚¤ã‚¹ã‚³ã‚³ã‚¢","ã‚³ãƒ¼ãƒ’ãƒ¼ç‰›ä¹³","ã„ã¡ã”ãƒŸãƒ«ã‚¯",
"ãƒãƒŠãƒŠã‚ªãƒ¬","ãƒ¨ãƒ¼ã‚°ãƒ«ãƒˆãƒ‰ãƒªãƒ³ã‚¯","ä¹³é…¸èŒé£²æ–™","ãƒ¬ãƒ¢ãƒãƒ¼ãƒ‰","ã¯ã¡ã¿ã¤ãƒ¬ãƒ¢ãƒ³","ã‚¹ãƒãƒ¼ãƒ„ãƒ‰ãƒªãƒ³ã‚¯","ãƒ¬ãƒƒãƒ‰ãƒ–ãƒ«","ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã‚¨ãƒŠã‚¸ãƒ¼",
"ãƒ•ãƒ«ãƒ¼ãƒ„ãƒ†ã‚£ãƒ¼","ãƒ”ãƒ¼ãƒãƒ†ã‚£ãƒ¼","ãƒ¬ãƒ¢ãƒ³ãƒ†ã‚£ãƒ¼","é»’çƒé¾èŒ¶","è±†ä¹³","èª¿æ•´è±†ä¹³","ã‚¹ãƒ ãƒ¼ã‚¸ãƒ¼ã„ã¡ã”","ã‚¹ãƒ ãƒ¼ã‚¸ãƒ¼ãƒãƒŠãƒŠ","ãƒ©ãƒ ãƒ",
"å†·ã‚„ã—ã‚ã‚","æŠ¹èŒ¶ãƒŸãƒ«ã‚¯","ã‚­ãƒ£ãƒ©ãƒ¡ãƒ«ãƒ©ãƒ†","ã‚«ãƒ•ã‚§ãƒ©ãƒ†","å¾®ç³–ã‚³ãƒ¼ãƒ’ãƒ¼","ç‚­é…¸ãƒ¬ãƒ¢ãƒ³","ç‚­é…¸ã‚°ãƒ¬ãƒ¼ãƒ—ãƒ•ãƒ«ãƒ¼ãƒ„","ãƒãƒ³ã‚´ãƒ¼ã‚¸ãƒ¥ãƒ¼ã‚¹",
"ç™½ã¶ã©ã†ã‚¸ãƒ¥ãƒ¼ã‚¹","ã‚¢ãƒ­ã‚¨ãƒ‰ãƒªãƒ³ã‚¯","ã‚°ãƒªãƒ¼ãƒ³ã‚¹ãƒ ãƒ¼ã‚¸ãƒ¼","ç´…èŒ¶èŠ±ä¼","ã‚¸ãƒ£ãƒ¯ãƒ†ã‚£ãƒ¼","ã‚³ãƒ¼ãƒ³ãƒã‚¿ãƒ¼ã‚¸ãƒ¥ç¼¶","ãŠã—ã‚‹ã“ç¼¶",
"ãƒ›ãƒƒãƒˆãƒ¬ãƒ¢ãƒ³","ãƒ›ãƒƒãƒˆãƒŸãƒ«ã‚¯","ãƒšãƒƒãƒˆãƒœãƒˆãƒ«ã‚³ãƒ¼ãƒ’ãƒ¼","ç”˜é…’","ãƒ•ãƒ«ãƒ¼ãƒ„ãƒŸãƒƒã‚¯ã‚¹ã‚¸ãƒ¥ãƒ¼ã‚¹","æ¢…ã‚¸ãƒ¥ãƒ¼ã‚¹","é’ã‚Šã‚“ã”ã‚¸ãƒ¥ãƒ¼ã‚¹",
"ã‚°ã‚¡ãƒã‚¸ãƒ¥ãƒ¼ã‚¹","ãƒ‘ã‚¤ãƒ³ã‚¸ãƒ¥ãƒ¼ã‚¹","ã‚½ãƒ«ãƒ†ã‚£ãƒ©ã‚¤ãƒ","ãƒ“ã‚¿ãƒŸãƒ³ã‚¦ã‚©ãƒ¼ã‚¿ãƒ¼","ãƒ¬ãƒ¢ãƒ³ã‚¹ã‚«ãƒƒã‚·ãƒ¥","ãƒ”ãƒ¼ãƒãƒã‚¯ã‚¿ãƒ¼","ã¶ã©ã†ã‚½ãƒ¼ãƒ€",
"ã‚ªãƒ¬ãƒ³ã‚¸ã‚¹ã‚«ãƒƒã‚·ãƒ¥","ãƒ¡ãƒƒãƒ„ã‚³ãƒ¼ãƒ©","ã‚­ãƒ¬ãƒ¼ãƒˆãƒ¬ãƒ¢ãƒ³","MATCH","ãƒªã‚¢ãƒ«ã‚´ãƒ¼ãƒ«ãƒ‰","ãƒŸãƒ­","ã»ã‚ã‚ˆã„é¢¨ç‚­é…¸ï¼ˆãƒãƒ³ã‚¢ãƒ«ï¼‰","è±†ä¹³ãƒãƒŠãƒŠ"];

const messages = [
"ä»Šæ—¥ã¯ç„¡ç†ã—ãªãã¦å¤§ä¸ˆå¤«ã€‚","å°ã•ãªä¸€æ­©ãŒæœªæ¥ã‚’å¤‰ãˆã‚‹ã€‚","ç¬‘é¡”ãŒé‹ã‚’å¼•ãå¯„ã›ã‚‹ã€‚","ç„¦ã‚‰ãªãã¦ã„ã„ã€‚","è‡ªåˆ†ã‚’ã¡ã‚ƒã‚“ã¨è¤’ã‚ã¦ã€‚",
"ã‚ãªãŸãªã‚‰ã§ãã‚‹ã€‚","æŒ‘æˆ¦ãŒãƒãƒ£ãƒ³ã‚¹ã‚’å‘¼ã¶ã€‚","å‹é”ã¨ã®æ™‚é–“ã‚’å¤§åˆ‡ã«ã€‚","ä»Šæ—¥ã¯æ—©ã‚ã«ä¼‘ã‚‚ã†ã€‚","æ·±å‘¼å¸ã§ãƒªã‚»ãƒƒãƒˆã€‚",
"å¥½ããªã“ã¨ã‚’æ€ã„å‡ºã—ã¦ã€‚","å°ã•ãªå¹¸ã›ã‚’è¦‹ã¤ã‘ã¦ã€‚","å¤±æ•—ã¯æˆé•·ã®ãƒãƒ£ãƒ³ã‚¹ã€‚","è‡ªåˆ†ã®ãƒšãƒ¼ã‚¹ã§é€²ã‚‚ã†ã€‚","åŠªåŠ›ã¯ã¡ã‚ƒã‚“ã¨å®Ÿã‚‹ã€‚",
"ä»Šæ—¥ã¯ãƒ©ãƒƒã‚­ãƒ¼ãŒè¿‘ã„ã€‚","å‰å‘ããªè¨€è‘‰ã‚’ä½¿ãŠã†ã€‚","ã‚ã‚ŠãŒã¨ã†ã‚’ä¼ãˆã¦ã¿ã¦ã€‚","ä»Šã®ã‚ãªãŸã§ååˆ†ã€‚","ç„¦ã‚‰ãšã‚†ã£ãã‚Šã€‚",
"æœªæ¥ã¯æ˜ã‚‹ã„ã€‚","ä»Šæ—¥ã‚‚ã¡ã‚ƒã‚“ã¨é ‘å¼µã£ã¦ã‚‹ã€‚","ã‚ãªãŸã¯ä¸€äººã˜ã‚ƒãªã„ã€‚","å‹‡æ°—ã¯ã‚‚ã†æŒã£ã¦ã„ã‚‹ã€‚","ä»Šæ—¥ã¯ãƒãƒ£ãƒ³ã‚¹ã®æ—¥ã€‚",
"è‡ªä¿¡ã‚’æŒã£ã¦ã€‚","å°ã•ãªæˆåŠŸã‚’å–œã¼ã†ã€‚","ç¬‘é¡”ã¯æœ€å¼·ã®æ­¦å™¨ã€‚","ä»Šæ—¥ã¯æŒ‘æˆ¦ãƒ‡ãƒ¼ã€‚","ç„¡ç†ã—ã™ããªã„ã§ã€‚",
"å„ªã—ã•ãŒé‹ã‚’å‘¼ã¶ã€‚","ã‚ãªãŸã®å€‹æ€§ã¯å®ç‰©ã€‚","ä»Šæ—¥ã¯æ–°ã—ã„ç™ºè¦‹ãŒã‚ã‚‹ã€‚","ãƒã‚¸ãƒ†ã‚£ãƒ–ãŒéµã€‚","ä»Šæ—¥ã®åŠªåŠ›ã¯æœªæ¥ã®å‘³æ–¹ã€‚",
"å¥½ããªè‰²ã‚’èº«ã«ã¤ã‘ã¦ã€‚","ä»Šã‚’æ¥½ã—ã‚‚ã†ã€‚","ãã£ã¨å¤§ä¸ˆå¤«ã€‚","ç¬‘é¡”ã§ä¹—ã‚Šè¶Šãˆã‚ˆã†ã€‚","å°ã•ãªå‹‡æ°—ãŒæœªæ¥ã‚’å¤‰ãˆã‚‹ã€‚",
"ä»Šæ—¥ã¯è‡ªåˆ†ã«ã”è¤’ç¾ã€‚","ç›´æ„Ÿã‚’ä¿¡ã˜ã¦ã€‚","ç„¦ã‚Šã¯æ‰‹æ”¾ãã†ã€‚","å¿ƒã‚’è»½ãã—ã¦ã€‚","ä»Šæ—¥ã¯å‰é€²ã®æ—¥ã€‚",
"è‡ªåˆ†ã‚‰ã—ãè¼ã“ã†ã€‚","ä»Šã§ãã‚‹ã“ã¨ã‚’ã‚„ã‚ã†ã€‚","ç¬‘é¡”ã¯é€£é–ã™ã‚‹ã€‚","ä»Šæ—¥ã‚‚å¿œæ´ã—ã¦ã‚‹ã€‚","å°ã•ãªè¦ªåˆ‡ãŒå¹¸é‹ã«ã€‚",
"æ˜æ—¥ã¯ã‚‚ã£ã¨è‰¯ããªã‚‹ã€‚","ä»Šæ—¥ã®å‡ºä¼šã„ã‚’å¤§åˆ‡ã«ã€‚","ã‚ãªãŸã¯å¼·ã„ã€‚","è‡ªåˆ†ã‚’ä¿¡ã˜ã‚‹æ—¥ã€‚","ä»Šæ—¥ã¯ãƒã‚¸ãƒ†ã‚£ãƒ–ãƒ‡ãƒ¼ã€‚",
"è«¦ã‚ãªã„å¿ƒãŒéµã€‚","å°ã•ãªå¤‰åŒ–ãŒå¤§ããªæœªæ¥ã€‚","ä»Šæ—¥ã¯é‹ãŒå‘³æ–¹ã€‚","å¤§ä¸ˆå¤«ã€é€²ã‚“ã§ã‚‹ã€‚","ç¬‘é¡”ã‚’å¿˜ã‚Œãªã„ã§ã€‚",
"ä»Šæ—¥ã¯æ·±å‘¼å¸ã®æ—¥ã€‚","å°ã•ãªå¹¸ã›ã«æ°—ã¥ã„ã¦ã€‚","æœªæ¥ã¯è‡ªåˆ†ã§ä½œã‚Œã‚‹ã€‚","ä»Šæ—¥ã®é¸æŠãŒæœªæ¥ã‚’å¤‰ãˆã‚‹ã€‚","ä»Šã‚’å¤§åˆ‡ã«ã€‚",
"ã‚ãªãŸã®åŠªåŠ›ã¯æœ¬ç‰©ã€‚","ä»Šæ—¥ã¯ãƒãƒ£ãƒ³ã‚¹ãŒæ¥ã‚‹ã€‚","å¥½ããªã“ã¨ã«æ­£ç›´ã«ã€‚","ä»Šæ—¥ã‚‚ç´ æ•µãªä¸€æ—¥ã€‚","è‡ªåˆ†ã‚’å¥½ãã§ã„ã‚ˆã†ã€‚",
"ä»Šæ—¥ã¯è‡ªä¿¡ã‚’æŒã¤æ—¥ã€‚","å„ªã—ã•ãŒæœªæ¥ã‚’å¤‰ãˆã‚‹ã€‚","ç„¦ã‚‰ãªãã¦ã„ã„ã‚ˆã€‚","ä»Šæ—¥ã¯ãƒ©ãƒƒã‚­ãƒ¼ã‚µã‚¤ãƒ³ãŒã‚ã‚‹ã€‚","ä¸€æ­©è¸ã¿å‡ºãã†ã€‚",
"ä»Šæ—¥ã®æŒ‘æˆ¦ãŒå®ç‰©ã€‚","ã‚ãªãŸã¯å¯èƒ½æ€§ã®å¡Šã€‚","ä»Šæ—¥ã¯é‹æ°—ä¸Šæ˜‡ã€‚","å¿ƒé…ã—ãªãã¦ã„ã„ã€‚","ä»Šæ—¥ã®è¡Œå‹•ãŒéµã€‚",
"ç¬‘é¡”ã§éã”ãã†ã€‚","ä»Šæ—¥ã¯è‡ªåˆ†æ™‚é–“ã‚’ã€‚","å°ã•ãªå‰é€²ã§OKã€‚","ä»Šæ—¥ã‚‚ç”Ÿãã¦ã‚‹ã ã‘ã§å‰ã„ã€‚","æœªæ¥ã¯å‘³æ–¹ã€‚",
"ä»Šæ—¥ã¯ã„ã„æ—¥ã«ãªã‚‹ã€‚","ã‚ãªãŸã¯ä¾¡å€¤ãŒã‚ã‚‹ã€‚","ä»Šæ—¥ã¯å‹‡æ°—ã‚’å‡ºã™æ—¥ã€‚","å¥½ããªéŸ³æ¥½ã§ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ã€‚","ä»Šæ—¥ã¯ç¬‘é¡”ãƒ‡ãƒ¼ã€‚",
"è‡ªåˆ†ã‚’å¤§åˆ‡ã«ã€‚","ä»Šæ—¥ã¯ãƒãƒ£ãƒ³ã‚¹åˆ°æ¥ã€‚","ã‚ãªãŸãªã‚‰ä¹—ã‚Šè¶Šãˆã‚‰ã‚Œã‚‹ã€‚","ä»Šæ—¥ã¯å®‰å¿ƒã—ã¦ã„ã„ã€‚","æœªæ¥ã¯æ˜ã‚‹ã„ã‚ˆã€‚","ä»Šæ—¥ã‚‚å‰é€²ä¸­ã€‚"
];

const stamps = ["â­","âœ¨","ğŸ’–","ğŸ’«","ğŸŒˆ","ğŸ€","ğŸ“","ğŸ©","ğŸª","ğŸ«","ğŸ­","ğŸ‰","ğŸŠ","ğŸ§","ğŸ°","ğŸ§","ğŸ¨","ğŸ¦","ğŸ¥¤","â˜•","ğŸµ","ğŸ‹","ğŸŠ","ğŸ‡","ğŸ‰","ğŸŒ","ğŸ","ğŸ¥","ğŸ","ğŸ","ğŸ","ğŸ’","ğŸ‘","ğŸ¥­","ğŸ¥¥","ğŸ†","ğŸŒ½","ğŸ¥•","ğŸ ","ğŸ","ğŸ¥","ğŸ§ƒ","ğŸ§‹","ğŸ«","ğŸ«¶","ğŸ¤","ğŸ–¤","ğŸ’›","ğŸ’™","ğŸ’š","ğŸ§¡","ğŸ’œ","ğŸ©·","ğŸ©µ","ğŸ«§","ğŸˆ","ğŸ§¸","ğŸª…","ğŸª©","ğŸ§¿","ğŸŒŸ","ğŸŒ™","â˜€ï¸","ğŸŒ¸","ğŸŒ¼","ğŸ€","ğŸŒ¿","ğŸƒ","ğŸŒ±","ğŸª´","ğŸ§¡","ğŸ©·","ğŸ«¶","ğŸ§¸","ğŸª©","ğŸŒŸ","ğŸŒ™","ğŸŒˆ","âœ¨","ğŸ’«","ğŸ’–","ğŸ“","ğŸ©","ğŸª","ğŸ«","ğŸ­","ğŸ‰"];

/* ==========================
   1æ—¥1å›åˆ¶é™
========================== */
const today = new Date().toISOString().slice(0,10);
if(localStorage.getItem("lastDate")===today){
  document.getElementById("startBtn").disabled=true;
  document.getElementById("startBtn").textContent="ä»Šæ—¥ã®å ã„ã¯æ¸ˆã¿";
}

/* ==========================
   èƒŒæ™¯ä¿å­˜
========================== */
const bgKey = "bgImage";
const bg = localStorage.getItem(bgKey);
if(bg) document.body.style.backgroundImage = `url(${bg})`;

document.getElementById("bgUpload").onchange = (e)=>{
  const file = e.target.files[0];
  if(!file) return;
  const reader = new FileReader();
  reader.onload = (ev)=>{
    document.body.style.backgroundImage = `url(${ev.target.result})`;
    localStorage.setItem(bgKey, ev.target.result);
  };
  reader.readAsDataURL(file);
};
document.getElementById("bgClear").onclick = ()=>{
  document.body.style.backgroundImage = "";
  localStorage.removeItem(bgKey);
};

/* ==========================
   å ã„é–‹å§‹ï¼ˆãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—å›é¿ï¼‰
========================== */
let resultWindow = null;

document.getElementById("startBtn").onclick = ()=>{
  const nick = document.getElementById("nickname").value.trim();
  const birth = document.getElementById("birthday").value;
  const gender = document.getElementById("gender").value;

  if(!nick || !birth){
    alert("ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ ã¨ç”Ÿå¹´æœˆæ—¥ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„");
    return;
  }

  // ã“ã“ã§æ–°ã—ã„ã‚¿ãƒ–ã‚’é–‹ãï¼ˆãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ãƒ–ãƒ­ãƒƒã‚¯å›é¿ï¼‰
  resultWindow = window.open("about:blank", "_blank");

  let sec=10;
  const countEl = document.getElementById("count");
  countEl.textContent = `ğŸ”®å ã„ä¸­â€¦ ${sec}ç§’`;

  const timer = setInterval(()=>{
    sec--;
    countEl.textContent = `ğŸ”®å ã„ä¸­â€¦ ${sec}ç§’`;
    if(sec<=0){
      clearInterval(timer);
      countEl.textContent = "";
      localStorage.setItem("lastDate", today);
      document.getElementById("startBtn").disabled=true;
      document.getElementById("startBtn").textContent="ä»Šæ—¥ã®å ã„ã¯æ¸ˆã¿";

      const seed = hash(nick + birth + gender + today);
      const snack = snacks[seed % snacks.length];
      const drink = drinks[(seed>>2) % drinks.length];
      const msg = messages[(seed>>4) % messages.length];

      const data = {user:{nick,birth,gender}, snack, drink, msg, date:new Date().toLocaleString()};
      const url = new URL(location.href);
      url.searchParams.set("result", btoa(JSON.stringify(data)));

      if(resultWindow) resultWindow.location = url.toString();
    }
  },1000);
};

/* ==========================
   å…±æœ‰
========================== */
function copyURL(){
  const url = location.href;
  navigator.clipboard.writeText(url);
  alert("URLã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼");
}
function openSNS(kind){
  const text = encodeURIComponent("ãŠã‚„ã¤ãŠã¿ãã˜ã‚’ã‚„ã£ã¦ã¿ã¦ï¼ğŸ­");
  const url = encodeURIComponent(location.href);
  if(kind==="twitter"){
    window.open(`https://twitter.com/intent/tweet?text=${text}&url=${url}`);
  }else if(kind==="line"){
    window.open(`https://line.me/R/msg/text/?${text}%0A${url}`);
  }
}
function hash(s){
  let h=0;
  for(let i=0;i<s.length;i++) h = (h*31 + s.charCodeAt(i))|0;
  return Math.abs(h);
}

/* ==========================
   çµæœãƒšãƒ¼ã‚¸è¡¨ç¤º
========================== */
const params = new URLSearchParams(location.search);
const res = params.get("result");
if(res){
  const data = JSON.parse(atob(res));
  document.body.innerHTML = `
  <div class="wrap">
    <div class="card">
      <h1>ğŸ­å ã„çµæœğŸ¬</h1>
      <p><b>${data.user.nick}</b> ã•ã‚“</p>
      <p>ğŸª ãŠã‚„ã¤ï¼š<b>${data.snack}</b></p>
      <p>ğŸ¥¤ é£²ã¿ç‰©ï¼š<b>${data.drink}</b></p>
      <p>ğŸ’¬ ä¸€è¨€ï¼š<b>${data.msg}</b></p>
      <p>ğŸ•’ ${data.date}</p>

      <canvas id="canvas" width="420" height="560"></canvas>

      <div class="tools">
        <input type="color" id="color" value="#ff2e8a">
        <input type="range" id="size" min="1" max="30" value="6">
        <input type="range" id="opacity" min="0.1" max="1" step="0.1" value="1">
        <input type="range" id="blur" min="0" max="20" value="0">
        <button onclick="mode('pen')">ãƒšãƒ³</button>
        <button onclick="mode('stamp')">ã‚¹ã‚¿ãƒ³ãƒ—</button>
        <button onclick="saveImg()">ç”»åƒä¿å­˜</button>
        <button onclick="share()">å…±æœ‰</button>
      </div>
      <div class="mini">â€»ãƒšãƒ³ï¼šè‰²ãƒ»å¤ªã•ãƒ»é€æ˜åº¦ãƒ»ã¼ã‹ã—ãŒå¤‰ãˆã‚‰ã‚Œã¾ã™</div>

      <div class="row">
        <input type="color" id="bgColor" value="#ffffff">
        <button onclick="setBgColor()">èƒŒæ™¯è‰²å¤‰æ›´</button>
      </div>

      <div class="stampGrid" id="stampGrid"></div>
      <div id="ad">åºƒå‘Šæ ï¼ˆã“ã“ã«AdSenseã‚³ãƒ¼ãƒ‰ã‚’è²¼ã£ã¦ãã ã•ã„ï¼‰</div>
    </div>
  </div>
  `;
  initDeco();
}

/* ==========================
   ãƒ‡ã‚³æ©Ÿèƒ½
========================== */
let canvas, ctx, drawing=false, modeType="pen";
function initDeco(){
  canvas=document.getElementById("canvas");
  ctx=canvas.getContext("2d");

  const savedBg = localStorage.getItem("bgImage");
  if(savedBg){
    const img = new Image();
    img.onload = ()=>ctx.drawImage(img,0,0,canvas.width,canvas.height);
    img.src = savedBg;
  }else{
    ctx.fillStyle="#fff";
    ctx.fillRect(0,0,canvas.width,canvas.height);
  }

  const grid=document.getElementById("stampGrid");
  stamps.forEach(s=>{
    const btn=document.createElement("button");
    btn.className="stampBtn";
    btn.textContent=s;
    btn.onclick=()=>placeStamp(s);
    grid.appendChild(btn);
  });

  // PC
  canvas.onmousedown = (e)=>{drawing=true; ctx.beginPath(); draw(e); }
  canvas.onmouseup = ()=>{drawing=false; saveDeco();}
  canvas.onmousemove = (e)=>{ if(!drawing || modeType!=="pen") return; draw(e); }

  // ã‚¹ãƒãƒ›å¯¾å¿œï¼ˆã‚¿ãƒƒãƒï¼‰
  canvas.addEventListener("touchstart", (e)=>{
    e.preventDefault();
    drawing=true; ctx.beginPath();
    draw(e.touches[0]);
  });
  canvas.addEventListener("touchmove", (e)=>{
    e.preventDefault();
    if(!drawing || modeType!=="pen") return;
    draw(e.touches[0]);
  });
  canvas.addEventListener("touchend", ()=>{
    drawing=false; saveDeco();
  });
}

function getPos(e){
  const rect = canvas.getBoundingClientRect();
  const x = (e.clientX - rect.left) * (canvas.width / rect.width);
  const y = (e.clientY - rect.top) * (canvas.height / rect.height);
  return {x,y};
}

function draw(e){
  const pos = getPos(e);
  ctx.lineWidth = document.getElementById("size").value;
  ctx.strokeStyle = document.getElementById("color").value;
  ctx.globalAlpha = document.getElementById("opacity").value;
  ctx.filter = `blur(${document.getElementById("blur").value}px)`;
  ctx.lineTo(pos.x,pos.y);
  ctx.stroke();
  ctx.beginPath();
  ctx.moveTo(pos.x,pos.y);
}

function mode(t){
  modeType=t;
}

function placeStamp(s){
  if(!canvas) return;
  ctx.globalAlpha = 1;
  ctx.filter = "none";
  ctx.font="40px sans-serif";
  ctx.fillText(s, canvas.width/2 - 20, canvas.height/2);
  saveDeco();
}

function saveDeco(){
  localStorage.setItem("deco_"+today, canvas.toDataURL());
}

/* ==========================
   ç”»åƒä¿å­˜ï¼ˆçµæœ+ãƒ‡ã‚³ã‚’1æšã«ã¾ã¨ã‚ã‚‹ï¼‰
========================== */
function saveImg(){
  const link=document.createElement("a");
  link.download="omikuji_deco.png";
  link
